<div th:fragment="detail-content-takeaway">
    <h2 th:text="${product.name}">Tên sản phẩm</h2>

    <img th:src="${product.imageURL ?: 'https://via.placeholder.com/400x300?text=Pizza'}"
         th:alt="${product.name}">

    <p>
        <strong>Mô tả:</strong>
        <span th:text="${product.description ?: 'Chưa có mô tả.'}"></span>
    </p>

    <form class="ajax-form" th:action="@{/cashier/takeaway/cart/add}" method="post">
        <input type="hidden" name="productId" th:value="${product.id}">

        <!-- CHỌN SIZE -->
        <div th:if="${productSizes != null and !productSizes.isEmpty()}">
            <label for="sizeSelect">Chọn kích cỡ:</label>
            <select id="sizeSelect" name="productSizeId" required>
                <option th:each="ps : ${productSizes}"
                        th:value="${ps.id}"
                        th:attr="data-flash-sale=${ps.onFlashSale}">
                    <span th:if="${ps.onFlashSale}"
                          th:text="${ps.size.sizeName + ' - '
                              + #numbers.formatDecimal(ps.currentPrice, 0, 'COMMA', 0, 'POINT') + '₫ (Giảm giá từ '
                              + #numbers.formatDecimal(ps.basePrice, 0, 'COMMA', 0, 'POINT') + '₫)'}">
                    </span>
                    <span th:unless="${ps.onFlashSale}"
                          th:text="${ps.size.sizeName + ' - '
                              + #numbers.formatDecimal(ps.currentPrice, 0, 'COMMA', 0, 'POINT') + '₫'}">
                    </span>
                </option>
            </select>
        </div>

        <label>Số lượng:</label>
        <input type="number" name="quantity" value="1" min="1" max="99">

        <label>Ghi chú (tùy chọn):</label>
        <textarea name="note" rows="3" placeholder="Ví dụ: Ít cay, thêm phô mai..."></textarea>

        <div>
            <button type="submit"
                    onclick="document.getElementById('productModal').style.display='none'">
                Thêm vào giỏ
            </button>
            <button type="button"
                    onclick="document.getElementById('productModal').style.display='none'">
                ✕ Đóng
            </button>
        </div>
    </form>
</div>
