<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Out-of-Stock Management - PizzarIO</title>
    <link rel="stylesheet" th:href="@{/css/kitchen.css}" />
    <link rel="stylesheet" th:href="@{/css/kitchen-dashboard.css}" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Top bar -->
    <header class="topbar">
        <div class="brand">üçï PizzarIO</div>
        <div class="staff-info">
            <span>T√™n: <strong th:text="${staff.name}">Kitchen Staff</strong></span>
        </div>
        <div class="datetime-info">
            <div id="clock" class="clock">--:--:--</div>
            <div id="date" class="date">--/--/----</div>
        </div>
        <div class="actions">
            <a th:href="@{/kitchen/dashboard}" class="btn btn-secondary" style="text-decoration: none; display: inline-block">
                üìä Dashboard
            </a>
            <a th:href="@{/kitchen/order-list}" class="btn btn-secondary" style="text-decoration: none; display: inline-block">
                üìã Danh s√°ch ƒë∆°n h√†ng
            </a>
            <a th:href="@{/kitchen/outstock}" class="btn btn-primary" style="text-decoration: none; display: inline-block">
                üçΩÔ∏è Qu·∫£n l√Ω Menu
            </a>
            <form th:action="@{/logout}" method="post" style="display: inline;">
                <input
                    type="hidden"
                    th:if="${_csrf != null}"
                    th:name="${_csrf.parameterName}"
                    th:value="${_csrf.token}"
                />
                <button
                    type="submit"
                    class="btn-logout"
                    onclick="return confirm('B·∫°n c√≥ mu·ªën ƒëƒÉng xu·∫•t kh√¥ng?')"
                >
                    üö™ ƒêƒÉng xu·∫•t
                </button>
            </form>
        </div>
    </header>

    <!-- Main Content -->
    <main class="kitchen-main">
        <!-- Page Title -->
        <div class="dashboard-title">
            <div class="title-left">
                <h1><i class="fas fa-box-open"></i> Qu·∫£n l√Ω s·∫£n ph·∫©m h·∫øt h√†ng</h1>
                <p>Qu·∫£n l√Ω tr·∫°ng th√°i s·∫£n ph·∫©m v√† t√¨nh tr·∫°ng t·ªìn kho</p>
            </div>
        </div>

        <!-- Product Grid -->
        <div class="product-list-grid" th:if="${products != null and !#lists.isEmpty(products)}">
            <div class="product-card" th:each="p : ${products}">
                <div class="card-header">
                    <span class="product-title" th:text="${p.name}">T√™n s·∫£n ph·∫©m</span>
                    <span class="badge status-badge active" th:if="${p.active}">ACTIVE</span>
                    <span class="badge status-badge inactive" th:if="${!p.active}">INACTIVE</span>
                </div>
                <div class="product-attr-row">
                    <span class="attr-label">M√£:</span>
                    <span class="attr-value" th:text="${p.id}"></span>
                </div>
                <div class="product-desc">
                    <span class="attr-label">M√¥ t·∫£:</span> <span th:text="${p.description}"></span>
                </div>
                <div class="product-foot">
                    <form th:action="@{'/product/active/' + ${p.id}}" method="post" style="display:inline-block">
                      <label class="switch">
                          <input type="checkbox" name="active" th:checked="${p.isActive}" onchange="this.form.submit()">
                          <span class="slider"></span>
                      </label>
                      <span class="active-text">Active</span>
                    </form>
                </div>
            </div>
        </div>

        <!-- Empty State -->
        <div class="empty-state" th:if="${products == null or #lists.isEmpty(products)}">
            <div class="empty-icon">
                <i class="fas fa-box-open"></i>
            </div>
            <h3>Kh√¥ng c√≥ s·∫£n ph·∫©m n√†o</h3>
            <p>Hi·ªán t·∫°i kh√¥ng c√≥ s·∫£n ph·∫©m n√†o trong h·ªá th·ªëng</p>
        </div>
    </main>

    <!-- Scripts -->
    <script>
        // Clock and Date Display
        const $clock = document.getElementById("clock");
        const $date = document.getElementById("date");

        function renderDateTime() {
            const now = new Date();
            if ($clock) {
                $clock.textContent = now.toLocaleTimeString("vi-VN", { hour12: false });
            }
            if ($date) {
                $date.textContent = now.toLocaleDateString("vi-VN", {
                    weekday: "long",
                    year: "numeric",
                    month: "long",
                    day: "numeric",
                });
            }
        }

        renderDateTime();
        setInterval(renderDateTime, 1000);
    </script>
</body>
</html>